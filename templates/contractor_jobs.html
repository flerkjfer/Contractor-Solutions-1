{% extends "base.html" %}
{% block content %}

<h2>Open Jobs</h2>

<!-- Flash messages -->
{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    <div class="flash-container">
      {% for category, message in messages %}
        <div class="alert alert-{{ category }}">
          {{ message }}
        </div>
      {% endfor %}
    </div>
  {% endif %}
{% endwith %}

<ul>
  {% for job in open_jobs %}
    <li>
      Job #{{ job.jobID }} - {{ job.service }} with {{ job.clientName }}
      <a href="/request_claim/{{ job.jobID }}">Request to Claim Job</a>
    </li>
  {% else %}
    <li>No open jobs available</li>
  {% endfor %}
</ul>

<h2>My Claimed Jobs</h2>
<ul>
  {% for job in my_jobs %}
    <li>
      Job #{{ job.jobID }} - {{ job.service }} with {{ job.clientName }} (Status: {{ job.status }})
    </li>
  {% else %}
    <li>You haven't claimed any jobs yet</li>
  {% endfor %}
</ul>

<p><a href="{{ url_for('contractor_dashboard') }}">Back to Dashboard</a></p>

{% endblock %}
