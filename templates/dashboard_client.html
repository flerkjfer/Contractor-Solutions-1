{% extends "base.html" %}
{% block content %}
<h2>Client Dashboard</h2>

{% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      <div class="flash-container">
        {% for category, message in messages %}
          <div class="alert alert-{{ category }}">
            {{ message }}
          </div>
        {% endfor %}
      </div>
    {% endif %}
  {% endwith %}

<p>Hello, <strong>{{ profile.firstName }} {{ profile.lastName }}</strong>!</p>
{# <p><a href="{{ url_for('view_all_clients') }}">See Other Clients</a></p> #}

<h3>Pending Contractor Requests</h3>

{% for r in contractor_requests %}
<div style="border:1px solid #ccc; padding:10px; margin-bottom:10px;">
    <p>Job: {{ r.service }}</p>
    <p>Requested by: <a href="/contractor_profile/{{ r.contractorID }}">{{ r.contractorName }}</a></p>

    <a href="/approve_contractor/{{ r.jobID }}/{{ r.contractorID }}">Approve</a> |
    <a href="/reject_contractor/{{ r.jobID }}/{{ r.contractorID }}">Reject</a>
</div>
{% else %}
<p>No pending contractor requests at the moment.</p>
{% endfor %}

<p><a href="{{ url_for('create_jobrequest') }}">Create New Job Request</a></p>
<p><a href="{{ url_for('view_jobrequests') }}">View & Manage My Job Requests</a></p>

{% endblock %}
